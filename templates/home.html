<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Trang Ch·ªß - Mua S·∫Øm</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <!-- Banner Th√¥ng B√°o (Epic 6 - MMK-133) -->
    <div class="promo-banner">
        üéâ <strong>HOT:</strong> Nh·∫≠p m√£ <span>GIAM10</span> ƒë·ªÉ ƒë∆∞·ª£c gi·∫£m gi√° 10% ngay h√¥m nay!
    </div>

    <header class="header">
        <div class="nav-container">
            <h1>üõçÔ∏è MMK Market</h1>
            <nav>
                <a href="/" class="nav-link active">Mua S·∫Øm</a>

                <!-- N√∫t Th√¥ng B√°o (Epic 6 - MMK-131) -->
                <div class="nav-item-dropdown">
                    <span class="nav-link" onclick="toggleNoti()" style="cursor:pointer">
                        üîî Th√¥ng b√°o <span id="noti-badge" class="badge hidden">0</span>
                    </span>
                    <!-- Dropdown ch·ª©a danh s√°ch -->
                    <div id="noti-dropdown" class="dropdown-content hidden">
                        <div class="dropdown-header">Th√¥ng b√°o m·ªõi nh·∫≠n</div>
                        <div id="noti-list">ƒêang t·∫£i...</div>
                    </div>
                </div>

                <!-- Th√™m link H·ªì s∆° (Epic 9) -->
                <a href="/profile" class="nav-link">üë§ H·ªì S∆°</a>
                <a href="/my-orders" class="nav-link">üì¶ ƒê∆°n Mua</a>
                <a href="/cart" class="nav-link">üõí Gi·ªè H√†ng</a>
                <a href="/seller" class="nav-link">K√™nh Ng∆∞·ªùi B√°n</a>
                <a href="/admin" class="nav-link">Admin</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Khu v·ª±c G·ª£i √Ω S·∫£n ph·∫©m -->
        <section class="suggestions-section">
            <h2>‚ú® G·ª£i √Ω cho b·∫°n</h2>
            <div id="behavioral-suggestions" class="suggestion-group">
                <h3>Theo H√†nh Vi</h3>
                <div id="behavioral-list" class="product-list"></div>
            </div>
            <div id="trending-suggestions" class="suggestion-group">
                <h3>Th·ªãnh H√†nh</h3>
                <div id="trending-list" class="product-list"></div>
            </div>
        </section>

        <!-- Khu v·ª±c T√¨m ki·∫øm -->
        <section class="search-section">
            <h2>üîé T√¨m Ki·∫øm S·∫£n Ph·∫©m</h2>
            <div class="search-controls">
                <input type="text" id="keyword" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..." class="search-input">
                <select id="vendor-filter">
                    <option value="">T·∫•t c·∫£ h√£ng</option>
                    <option value="logitech">Logitech</option>
                    <option value="sony">Sony</option>
                </select>
                <select id="category-filter">
                    <option value="">T·∫•t c·∫£ danh m·ª•c</option>
                    <option value="Ph·ª• ki·ªán">Ph·ª• ki·ªán</option>
                    <option value="M√°y t√≠nh">M√°y t√≠nh</option>
                </select>
                <button id="search-button" class="search-button">T√¨m</button>
            </div>
            <h3 id="result-count"></h3>
            <div id="product-results" class="product-list"></div>
        </section>
    </main>

    <!-- 1. Modal Ch·ªçn Bi·∫øn Th·ªÉ (Epic 4) -->
    <div id="product-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-body">
                <h3 id="modal-p-name">T√™n S·∫£n Ph·∫©m</h3>
                <p id="modal-p-price" class="product-price">0 ƒë</p>

                <div id="modal-variants-area">
                    <p><strong>Ch·ªçn ph√¢n lo·∫°i:</strong></p>
                    <div id="variant-options" class="variant-container"></div>
                </div>

                <div class="quantity-selector">
                    <strong>S·ªë l∆∞·ª£ng:</strong>
                    <input type="number" id="modal-qty" value="1" min="1" max="10">
                </div>

                <div id="stock-status" style="margin: 10px 0; font-size: 14px;"></div>

                <button id="confirm-add-btn" class="action-btn primary full-width">Th√™m V√†o Gi·ªè H√†ng</button>
            </div>
        </div>
    </div>

    <!-- 2. Toast Notification (Epic 4) -->
    <div id="toast" class="toast hidden">Th√™m th√†nh c√¥ng!</div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Kh·ªüi ch·∫°y logic trang ch·ªß
        document.addEventListener('DOMContentLoaded', initHomePage);
    </script>
</body>

</html>