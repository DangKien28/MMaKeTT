<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>K√™nh Ng∆∞·ªùi B√°n</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* CSS Ri√™ng cho n√∫t Test */
        .test-panel { margin-top: 30px; padding: 20px; background: #fff3cd; border: 1px dashed #e67e22; border-radius: 8px; }
        .test-btn { margin-right: 10px; padding: 8px 15px; cursor: pointer; border: none; border-radius: 4px; color: white; }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <h1>üè™ K√™nh Ng∆∞·ªùi B√°n</h1>
            <nav>
                <a href="/" class="nav-link">Mua S·∫Øm</a>
                
                <!-- EPIC 7: Chu√¥ng Th√¥ng B√°o Cho Seller (MMK-142) -->
                <div class="nav-item-dropdown">
                    <span class="nav-link" onclick="toggleSellerNoti()" style="cursor:pointer">
                        üîî Th√¥ng b√°o Shop <span id="seller-noti-badge" class="badge hidden">0</span>
                    </span>
                    <div id="seller-noti-dropdown" class="dropdown-content hidden">
                        <div class="dropdown-header">Ho·∫°t ƒë·ªông m·ªõi</div>
                        <div id="seller-noti-list">ƒêang t·∫£i...</div>
                    </div>
                </div>

                <a href="/admin" class="nav-link">Admin (Duy·ªát)</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- B∆∞·ªõc 1: ƒêƒÉng k√Ω -->
        <section id="register-section" class="form-section">
            <h2>üìù ƒêƒÉng K√Ω Gian H√†ng M·ªõi</h2>
            <div class="form-group">
                <label>H·ªç t√™n ch·ªß shop (Nh·∫≠p 'VIP' ƒë·ªÉ t·ª± duy·ªát):</label>
                <input type="text" id="reg-name" placeholder="Nguy·ªÖn VƒÉn A">
            </div>
            <div class="form-group">
                <label>Email:</label>
                <input type="email" id="reg-email" placeholder="email@example.com">
            </div>
            <div class="form-group">
                <label>S·ªë ƒëi·ªán tho·∫°i:</label>
                <input type="text" id="reg-phone" placeholder="0909xxxxxx">
            </div>
            <button onclick="registerShop()" class="action-btn primary">ƒêƒÉng K√Ω Ngay</button>
        </section>

        <!-- B∆∞·ªõc 2: Dashboard -->
        <section id="dashboard-section" class="form-section hidden">
            <div class="status-badge" id="shop-status-badge">Tr·∫°ng th√°i: Ch·ªù duy·ªát</div>
            <h2>‚öôÔ∏è Thi·∫øt L·∫≠p H·ªì S∆° Gian H√†ng</h2>
            <input type="hidden" id="current-shop-id">
            
            <div class="form-group">
                <label>T√™n Shop:</label>
                <input type="text" id="setup-name" placeholder="Shop C√¥ng Ngh·ªá...">
            </div>
            <div class="form-group">
                <label>ƒê·ªãa ch·ªâ kho:</label>
                <input type="text" id="setup-address" placeholder="123 ƒê∆∞·ªùng ABC...">
            </div>
            <button onclick="updateShopProfile()" class="action-btn secondary">L∆∞u H·ªì S∆°</button>

            <!-- KHU V·ª∞C TEST EPIC 7 (Gi·∫£ l·∫≠p s·ª± ki·ªán) -->
            <div class="test-panel">
                <h3>üõ†Ô∏è Test H·ªá Th·ªëng Th√¥ng B√°o (Epic 7)</h3>
                <p>V√¨ ch∆∞a c√≥ App kh√°ch h√†ng nh·∫Øn tin th·∫≠t, h√£y b·∫•m n√∫t d∆∞·ªõi ƒë·ªÉ gi·∫£ l·∫≠p:</p>
                <button class="test-btn" style="background:#3498db" onclick="testSellerNoti('chat')">üì© Gi·∫£ l·∫≠p Kh√°ch nh·∫Øn tin (MMK-138)</button>
                <button class="test-btn" style="background:#e74c3c" onclick="testSellerNoti('cancel')">‚ö†Ô∏è Gi·∫£ l·∫≠p Kh√°ch h·ªßy ƒë∆°n (MMK-139)</button>
            </div>
        </section>
    </main>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // T·ª± ƒë·ªông load th√¥ng b√°o shop m·ªói 5 gi√¢y
        document.addEventListener('DOMContentLoaded', () => {
            loadSellerNotifications();
            setInterval(loadSellerNotifications, 5000); // Polling gi·∫£ l·∫≠p realtime
        });
    </script>
</body>
</html>